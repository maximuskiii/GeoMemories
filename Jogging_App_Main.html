<!DOCTYPE html> 
<html>
<head> 
    <title>Geolocation App</title>
    <link rel="stylesheet" href="Jogging_App_StyleSheet.css">
    </head>
    <body>
        <p id="coords_display"></p>
        <div id="mapDiv" style="width: 600px; height: 700px;"></div>
        <button id="get_coords_button" onclick="getLocation()">Get coords</button> 
        <button id="center_map_button" onclick="getLocation()">Center map</button>
        <script>
            //watches location and repeats requests 
            function getLocation() {
                if(navigator.geolocation) {
                    navigator.geolocation.watchPosition(showPosition);
                    navigator.geolocation.watchPosition(initMap);
                    navigator.geolocation.getCurrentPosition(centerMap);
                } else {
                    console.log("Geoloocation is not supported");
                    //logs error if it is not possible to get geolocation
                }
            }
            function showPosition(position) {
                console.log("Latitude: " +position.coords.latitude + 
                "<br>Longitude: " + position.coords.longitude);        
            }

            //initializes the map object 
            function initMap(position) {
                getLocation();
                console.log("Running initmap")
                let map = new google.maps.Map(document.getElementById("mapDiv"), {
                    center: { lat: position.coords.latitude , lng: position.coords.longitude }, 
                    zoom: 15,
                    disableDefaultUI: true
                });
                var marker = new google.maps.Marker({ 
                    position: { lat: position.coords.latitude, lng: position.coords.longitude},
                    map:map,
                    draggarble:true
                });
                infoWindow = new google.maps.InfoWindow();
                infoWindow.open(map)
            }

            function centerMap(position) {
                 map.setCenter(new google.maps.LatLng(position.coords.latitude, position.coords.longitude));
            }

        </script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAEmGm-PIIFijbgz06Zem6kyoH9HOxJQFM&callback=initMap&v=weekly" defer>
        </script>
    </body>
</html> 